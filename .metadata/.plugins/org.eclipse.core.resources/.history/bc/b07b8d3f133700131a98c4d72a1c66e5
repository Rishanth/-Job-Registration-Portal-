


package com.virtusa.vrps.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

import com.virtusa.vrps.exception.PropagateException;
import com.virtusa.vrps.pojo.Address;
import com.virtusa.vrps.pojo.JobSeeker;
import com.virtusa.vrps.service.IJobSeekerService;


@Controller
public class JobSeekerController {
	
	@Autowired
	IJobSeekerService iJobSeekerService;
	
	@RequestMapping(value="/jobSeekerRegistration")
	public ModelAndView displayJobSeekerRegistrationForm()
	{
		return new ModelAndView("jobSeekerForm","jobSeeker",new JobSeeker());
	}

	
			
		@RequestMapping(value="/addJobSeeker",method=RequestMethod.POST)
		public ModelAndView addJobSeeker(@ModelAttribute("jobSeeker") JobSeeker jobSeeker,BindingResult result)
		{


			try 
			{
				Address address=new Address();


				address.setJobSeekerId(iJobSeekerService.saveOrUpdate(jobSeeker));
				return new ModelAndView("address","address",address);

			} 
			catch (PropagateException e) 
			{

				System.out.println(e);
				return null;
			}

		}
		
 @RequestMapping(value="/addToAddressDatabase")
 public ModelAndView addAddress(@ModelAttribute("address") Address address,BindingResult result) throws PropagateException
 {

		Address newAddress= new Address();					
		newAddress.setJobSeekerId(iJobSeekerService.saveOrUpdate(newAddress));	
		return new  ModelAndView("address","address",newAddress);
 }
		
		
}